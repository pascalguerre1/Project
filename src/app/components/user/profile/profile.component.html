<div id="body" class="animate-bottom">
  <div class="pg-profile-style">
  	<div class="row">
  		<div class="col-md-3 text-center">
        <div>
  			   <img style="width: 80%" [src]="user.image" alt="profile pic">
        </div>
        <div class="text-center">
            <a class="text-center" href="" data-toggle="modal" data-target="#imageModal" data-backdrop="static" data-keyboard="false">Edit Image</a>
        </div>
        <div class="text-center">
            <p><b>{{user.username}}</b></p>
        </div>
  		</div>
  		<div class="col-md-5 pg-vertical-line pg-vertical-line2 d-md-flex">
  			<div class="container">
          <label>Name</label>
          <p>{{user.firstName}} {{user.lastName}}</p>
          <label>Email</label>
          <p>{{user.email}}</p>
          <label>Gender</label>
          <p>{{user.gender}}</p>
          <!-- law office section -->
          <div *ngIf="this.user.role === 'attn'">
            <label>Office Information</label>
            <p>{{user.office}} <br> {{user.address}} {{user.city}}, {{user.state}} <br>Tel: {{user.phone}} <br> {{user.site}}</p>
            <label>Area of expertise</label>
            <p>{{user.selectedValues[0]}} <br> {{user.selectedValues[1]}} <br> {{user.selectedValues[2]}}</p>
          </div>
          <!-- end law office section -->                
          <label>About me</label>
          <p>{{user.bio}}</p>
          <a class="text-center" href="" data-toggle="modal" data-target="#profileModal" data-backdrop="static" data-keyboard="false">Edit Profile</a>
  			</div>
  		</div>
      <div class="col-md-4">
        <!-- law office section -->
        <div *ngIf="this.user.role === 'attn'">
            <div class="text-center">
              <h5 class="">Overall Rating:</h5>
              <a *ngIf="overallRating === 0">
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>    
              </a> 
              <a *ngIf="overallRating === 1">
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>    
              </a> 
              <a *ngIf="overallRating === 2">
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>    
              </a> 
              <a *ngIf="overallRating === 3">
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>    
              </a> 
              <a *ngIf="overallRating === 4">
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>    
              </a> 
              <a *ngIf="overallRating === 5">
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>    
              </a> 
            </div>
          <br>
          <div>
            <p class="text-center"><b><a routerLink="/user/reviews/{{user._id}}">{{this.reviews.length}} Reviews</a></b></p>
          </div>
          <div class="wrap">
            <ol class="content custom" style="padding-left: 0px">
              <li *ngIf="count1star"><span class="fa fa-star checked"></span>: <a routerLink="#">{{count1star}} review(s)</a></li>
              <li *ngIf="!count1star"><span class="fa fa-star checked"></span>: <a routerLink="#">0 review(s)</a></li>          
              <li *ngIf="count2star"><span class="fa fa-star checked"></span>: <a routerLink="#">{{count2star}} review(s)</a></li>
              <li *ngIf="!count2star"><span class="fa fa-star checked"></span>: <a routerLink="#">0 review(s)</a></li>
              <li *ngIf="count3star"><span class="fa fa-star checked"></span>: <a routerLink="#">{{count3star}} review(s)</a></li>
              <li *ngIf="!count3star"><span class="fa fa-star checked"></span>: <a routerLink="#">0 review(s)</a></li>
              <li *ngIf="count4star"><span class="fa fa-star checked"></span>: <a routerLink="#">{{count4star}} review(s)</a></li>
              <li *ngIf="!count4star"><span class="fa fa-star checked"></span>: <a routerLink="#">0 review(s)</a></li>
              <li *ngIf="count5star"><span class="fa fa-star checked"></span>: <a routerLink="#">{{count5star}} review(s)</a></li>
              <li *ngIf="!count5star"><span class="fa fa-star checked"></span>: <a routerLink="#">0 review(s)</a></li>
            </ol>
          </div>
        </div>
        <!-- end law office section -->   
        <div *ngIf="this.user.role === 'user'">
    			<div class="text-center">
    				<img style="width: 50%" [src]="user.badge" alt="badge pic">
    			</div>
          <br>
          <div>
            <p class="text-center"><b>{{user.bcount}} Badge(s)</b></p>
          </div>
          <br>
           <div class="text-center">
             Reviews written: {{userReviews.length}}
           </div>
           <div class="text-center">
             "Like" received: 10
           </div>
           <div class="text-center">
             "comment" received: 4
           </div>
           <hr>
          <div class="comment text-center ">
            <p style="font-size: 12px">Earn badges everytime someone "like" or comments on your reviews</p>
          </div>
        </div>
        <div *ngIf="this.user.role === 'admin'">
          <h3>Administrator Tools:</h3>
          <br>
          <br>
          <br>
          <div class="text-center">
            <button class="btn btn-primary col-10" routerLink="/userlist">Manage Users</button>
          </div>
          <br>
          <div class="text-center">
            <button class="btn btn-primary col-10" routerLink="/messagelist">Manage Messages</button>
          </div>        
        </div>
      </div>   
    </div>
  </div>
</div>

<!-- Bio Modals -->
<div class="modal fade" id="profileModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Edit Profile</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="ngOnInit()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="update()" id="profileForm" #f="ngForm">
          <div class="form-group">
            <label>First Name</label>
            <input class="form-control" type="text" name="firstName" [(ngModel)]="user.firstName">
          </div>
          <div class="form-group">
            <label>Last Name</label>
            <input class="form-control" type="text" name="lastName" [(ngModel)]="user.lastName">
          </div>
          <div class="form-group">
            <label>Email</label>
            <input class="form-control" type="text" name="email" [(ngModel)]="user.email">
          </div> 
          <div *ngIf="this.user.role === 'attn'" class="form-group">
            <label>Office Name</label>
            <input class="form-control" type="text" name="office" [(ngModel)]="user.office" >
          </div> 
          <div *ngIf="this.user.role === 'attn'" class="form-group">
            <label>Address</label>
            <input class="form-control" type="text" name="address" [(ngModel)]="user.address" >
          </div> 
          <div *ngIf="this.user.role === 'attn'" class="form-group">
            <label>City</label>
            <input class="form-control" type="text" name="city" [(ngModel)]="user.city" >
          </div>
          <div *ngIf="this.user.role === 'attn'" class="form-group">
            <label class="col-form-label">State</label>
            <select  class="form-group input-group form-control" name="state" [(ngModel)]="user.state">
                 <option value="{{state.value}}" *ngFor="let state of states">{{state.name}}</option>
            </select>
          </div>
          <div *ngIf="this.user.role === 'attn'" class="form-group">
            <label>Phone</label>
            <input class="form-control" type="text" name="phone" [(ngModel)]="user.phone" >
          </div> 
          <div *ngIf="this.user.role === 'attn'" class="form-group">
            <label>Site</label>
            <input class="form-control" type="text" name="site" [(ngModel)]="user.site" >
          </div>
          <div *ngIf="this.user.role === 'attn' && user.selectedValues[0]" class="form-group">
            <label class="col-form-label">Practice Area1</label>
            <select class="form-group input-group form-control" name="selectedValues[0]" [(ngModel)]="user.selectedValues[0]">
              <option value="{{area.name}}" *ngFor="let area of areas">{{area.name}}</option>
            </select>
          </div>
          <div *ngIf="this.user.role === 'attn' && user.selectedValues[1]" class="form-group">
            <label class="col-form-label">Practice Area2</label>
            <select class="form-group input-group form-control" name="selectedValues[1]" [(ngModel)]="user.selectedValues[1]">
              <option value="{{area.name}}" *ngFor="let area of areas">{{area.name}}</option>
            </select>
          </div>
          <div *ngIf="this.user.role === 'attn' && user.selectedValues[2]" class="form-group">
            <label class="col-form-label">Practice Area3</label>
            <select class="form-group input-group form-control" name="selectedValues[2]" [(ngModel)]="user.selectedValues[2]">
              <option value="{{area.name}}" *ngFor="let area of areas">{{area.name}}</option>
            </select>
          </div>
          <div class="form-group">
            <label>About me</label>
            <textarea class="form-control" type="text" name="bio" [(ngModel)]="user.bio" rows="5" >
            </textarea>
          </div>
          <div class="text-center">
            <button class="btn btn-danger" data-dismiss="modal" type="button" (click)="ngOnInit()">Cancel</button>
            <button class="btn btn-success" type="submit" form="profileForm">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Image Modals -->
<div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Upload New Image</h5>
         <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body">
        <form ngNoForm action="{{baseUrl}}/api/user/{{user._id}}/upload" method="post" enctype="multipart/form-data">
          <div class="form-group">
              <input class="form-control" type="file" name="image">
          </div>
          <button type="submit" class="btn btn-success btn-block">Upload</button>
        </form>
      </div>
    </div>
  </div>
</div>